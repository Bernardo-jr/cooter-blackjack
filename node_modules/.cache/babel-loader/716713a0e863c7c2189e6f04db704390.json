{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _objectSpread from\"/home/bernardorios/react/git-repository/cooter-blackjack/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"/home/bernardorios/react/git-repository/cooter-blackjack/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/home/bernardorios/react/git-repository/cooter-blackjack/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/bernardorios/react/git-repository/cooter-blackjack/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/bernardorios/react/git-repository/cooter-blackjack/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/bernardorios/react/git-repository/cooter-blackjack/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/bernardorios/react/git-repository/cooter-blackjack/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/bernardorios/react/git-repository/cooter-blackjack/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/bernardorios/react/git-repository/cooter-blackjack/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{Component}from'react';import pichonImg from'../pichon.png';import cooterImg from'../COOTER.png';import Carta from'./carta';import{Container,Row,Col,Button,Card}from'react-bootstrap';var initialState={pichon:[],puntosPichon:0,asPichon:false,fin:false,casa:[],puntosCasa:0,asCasa:false};var valores=[\"A\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"J\",\"Q\",\"K\"];var palos=[\"♣\",\"♠\",\"♥\",\"♦\"];var Partida=/*#__PURE__*/function(_Component){_inherits(Partida,_Component);var _super=_createSuper(Partida);function Partida(props){var _this;_classCallCheck(this,Partida);_this=_super.call(this,props);_this.numero=0;_this.index=0;_this.state=initialState;_this.getCard=_this.getCard.bind(_assertThisInitialized(_this));_this.plantarse=_this.plantarse.bind(_assertThisInitialized(_this));_this.refresh=_this.refresh.bind(_assertThisInitialized(_this));return _this;}//evento inicial\n_createClass(Partida,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return this.getCard(null,false);case 2:_context.next=4;return this.getCard(null,true);case 4:_context.next=6;return this.getCard(null,false);case 6:_context.next=8;return this.getCard(null,true);case 8:case\"end\":return _context.stop();}}},_callee,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()//El pichon se planta\n},{key:\"plantarse\",value:function(){var _plantarse=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var aux;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:aux=this.state.casa;aux.forEach(function(c){c.visible=true;});_context2.next=4;return this.setState({fin:true,casa:_toConsumableArray(aux)});case 4:if(!(this.state.puntosPichon<21)){_context2.next=11;break;}case 5:if(!(this.state.puntosCasa<17)){_context2.next=11;break;}aux=this.state.casa;_context2.next=9;return this.getCard(null,this.state.casa,this.state.puntosCasa);case 9:_context2.next=5;break;case 11:case\"end\":return _context2.stop();}}},_callee2,this);}));function plantarse(){return _plantarse.apply(this,arguments);}return plantarse;}()//reinicia la mano \n},{key:\"refresh\",value:function(){var _refresh=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return this.setState(_objectSpread(_objectSpread({},initialState),{},{casa:[],pichon:[]}));case 2:this.componentDidMount();case 3:case\"end\":return _context3.stop();}}},_callee3,this);}));function refresh(){return _refresh.apply(this,arguments);}return refresh;}()//cuenta los puntos   \n},{key:\"contar\",value:function(){var _contar=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(pts,as){var p;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:p=pts;if(\"JQK\".includes(this.numero)){p=p+10;if(p>21&&as){p=p-10;as=false;}}else if(this.numero.includes(\"A\")){if(p+11>21){p=p+1;}else{as=true;p=p+11;}}else{p=p+parseInt(this.numero);if(p>21&&as){p=p-10;as=false;}}return _context4.abrupt(\"return\",[p,as]);case 3:case\"end\":return _context4.stop();}}},_callee4,this);}));function contar(_x,_x2){return _contar.apply(this,arguments);}return contar;}()//valida que no se repitan las cartas\n},{key:\"validar\",value:function(){var _validar=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var _this2=this;var exist;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:exist=false;_context5.next=3;return this.state.casa.forEach(function(c){if(c.numero===_this2.numero&&c.index===_this2.index){exist=true;}});case 3:_context5.next=5;return this.state.pichon.forEach(function(c){if(c.numero===_this2.numero&&c.index===_this2.index){exist=true;}});case 5:console.log(exist);return _context5.abrupt(\"return\",exist);case 7:case\"end\":return _context5.stop();}}},_callee5,this);}));function validar(){return _validar.apply(this,arguments);}return validar;}()//pide una carta\n},{key:\"getCard\",value:function(){var _getCard=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(e,esCasa){var _this3=this;var exist,c,aux,points;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:this.index=Math.floor(Math.random()*palos.length);this.numero=valores[Math.floor(Math.random()*valores.length)];exist=false;_context6.next=5;return this.validar();case 5:exist=_context6.sent;case 6:if(!exist){_context6.next=14;break;}this.index=Math.floor(Math.random()*palos.length);this.numero=valores[Math.floor(Math.random()*valores.length)];_context6.next=11;return this.validar();case 11:exist=_context6.sent;_context6.next=6;break;case 14:if(!esCasa){_context6.next=25;break;}c=this.state.casa;_context6.next=18;return this.contar(this.state.puntosCasa,this.state.asCasa);case 18:aux=_context6.sent;if(c.length===0||this.state.fin){c.push({numero:this.numero,index:this.index,visible:true});}else{c.push({numero:this.numero,index:this.index,visible:false});}_context6.next=22;return this.setState({casa:_toConsumableArray(c),puntosCasa:parseInt(aux[0]),asCasa:aux[1]});case 22:if(this.state.puntosCasa>=21)this.plantarse(null);_context6.next=34;break;case 25:c=this.state.pichon;points=this.state.puntosPichon;_context6.next=29;return this.contar(points,this.state.asPichon);case 29:aux=_context6.sent;c.push({numero:this.numero,index:this.index});_context6.next=33;return this.setState({pichon:_toConsumableArray(c),puntosPichon:parseInt(aux[0]),asPichon:aux[1]},function(){return _this3.puntosPichon;});case 33:if(this.state.puntosPichon>=21)this.plantarse(null);case 34:case\"end\":return _context6.stop();}}},_callee6,this);}));function getCard(_x3,_x4){return _getCard.apply(this,arguments);}return getCard;}()},{key:\"render\",value:function render(){var _this4=this;return/*#__PURE__*/_jsxs(Container,{bg:\"#\",style:{padding:'1.5rem 0'},children:[/*#__PURE__*/_jsx(\"img\",{className:\"left\",height:\"240\",src:cooterImg,style:{position:'absolute',margin:'2rem 0'}}),/*#__PURE__*/_jsx(Row,{style:{padding:'2rem 0',minHeight:'18rem'},className:\"justify-content-md-center\",children:this.state.casa.map(function(card,i){return card.visible?/*#__PURE__*/_jsx(Col,{xs:true,lg:\"2\",children:/*#__PURE__*/_jsx(Carta,{numero:card.numero,palo:palos[card.index],color:card.index<=1?'text-black':'text-danger'})},i):/*#__PURE__*/_jsx(Col,{xs:true,lg:\"2\",children:/*#__PURE__*/_jsx(Card,{border:\"dark\",style:{width:'10rem',height:'15rem',padding:'0.125rem'},className:\"justify-content-md-center\",children:/*#__PURE__*/_jsx(Card.Img,{src:pichonImg})})},i);})}),/*#__PURE__*/_jsx(Row,{style:{minHeight:'2rem'},className:\"text-warning justify-content-md-center\",children:this.state.fin?this.state.puntosPichon>21||this.state.puntosCasa<=21&&this.state.puntosCasa>this.state.puntosPichon?/*#__PURE__*/_jsx(Col,{xs:true,lg:\"4\",className:\"text-center\",children:/*#__PURE__*/_jsx(\"h3\",{children:\"Te bail\\xE9 sabroso\"})}):this.state.puntosPichon===this.state.puntosCasa?/*#__PURE__*/_jsx(Col,{xs:true,lg:\"4\",className:\"text-center\",children:/*#__PURE__*/_jsx(\"h3\",{children:\"Desempate ?\"})}):/*#__PURE__*/_jsx(Col,{xs:true,lg:\"4\",className:\"text-center\",children:/*#__PURE__*/_jsx(\"h3\",{children:\"Caimos ante el mejor \"})}):/*#__PURE__*/_jsx(Col,{})}),/*#__PURE__*/_jsx(Row,{style:{padding:'2rem 0',minHeight:'18rem'},className:\"justify-content-md-center\",children:this.state.pichon.map(function(card,i){return/*#__PURE__*/_jsx(Col,{xs:true,lg:\"2\",children:/*#__PURE__*/_jsx(Carta,{numero:card.numero,palo:palos[card.index],color:card.index<=1?'text-black':'text-danger'})},i);})}),/*#__PURE__*/_jsxs(Row,{className:\"justify-content-md-center\",children:[/*#__PURE__*/_jsx(Button,{variant:this.state.fin?'outline-warning':'warning',onClick:function onClick(e){return _this4.state.fin?null:_this4.getCard(e,false);},children:\"Dame Carta\"}),\"\\xA0\",/*#__PURE__*/_jsx(Button,{variant:this.state.fin?'outline-warning':'warning',onClick:function onClick(e){return _this4.state.fin?null:_this4.plantarse(e);},children:\"Plantarse\"}),\"\\xA0\",/*#__PURE__*/_jsx(Button,{variant:!this.state.fin?'outline-warning':'warning',onClick:function onClick(e){return!_this4.state.fin?null:_this4.refresh(e);},children:\"Repartir\"}),\"\\xA0\"]})]});}}]);return Partida;}(Component);export{Partida as default};","map":{"version":3,"sources":["/home/bernardorios/react/git-repository/cooter-blackjack/src/componentes/partida.js"],"names":["Component","pichonImg","cooterImg","Carta","Container","Row","Col","Button","Card","initialState","pichon","puntosPichon","asPichon","fin","casa","puntosCasa","asCasa","valores","palos","Partida","props","numero","index","state","getCard","bind","plantarse","refresh","aux","forEach","c","visible","setState","componentDidMount","pts","as","p","includes","parseInt","exist","console","log","e","esCasa","Math","floor","random","length","validar","contar","push","points","padding","position","margin","minHeight","map","card","i","width","height"],"mappings":"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","sourcesContent":["import {Component} from 'react';\nimport pichonImg from '../pichon.png';\nimport cooterImg from '../COOTER.png';\nimport Carta from './carta';\nimport {Container,Row,Col,Button,Card} from 'react-bootstrap';\nconst initialState = {\n    pichon:[],\n    puntosPichon:0,\n    asPichon:false,\n    fin:false,\n    casa:[],\n    puntosCasa:0,\n    asCasa:false,\n};\nconst valores=[\"A\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"J\",\"Q\",\"K\"];\nconst  palos=[\"♣\" , \"♠\", \"♥\" , \"♦\" ];\nexport default class Partida extends Component{\n\n    \n    numero=0;\n    index=0;\n    constructor(props){\n        super(props);\n        this.state=initialState;\n        this.getCard=this.getCard.bind(this);\n        this.plantarse=this.plantarse.bind(this);\n        this.refresh=this.refresh.bind(this);\n    }\n    //evento inicial\n    async componentDidMount(){\n        await this.getCard(null,false);\n        await this.getCard(null,true);\n        await this.getCard(null,false);\n        await this.getCard(null,true);\n    }\n    //El pichon se planta\n    async plantarse(){\n      var aux=this.state.casa;\n      aux.forEach((c)=>{\n        c.visible=true;\n      });\n      await this.setState({\n        fin:true,\n        casa:[...aux]\n      });\n    if(this.state.puntosPichon<21){\n      while(this.state.puntosCasa<17){\n        aux=this.state.casa;\n        await this.getCard(null,this.state.casa,this.state.puntosCasa);\n      }\n    }\n    }\n   //reinicia la mano \n   async refresh(){\n       await this.setState({...initialState,casa:[],pichon:[]});\n        this.componentDidMount();\n    }\n    \n  //cuenta los puntos   \n  async contar(pts,as){\n      let p=pts;\n      if(\"JQK\".includes(this.numero)){\n        p=p+10;\n        if(p>21&& as){\n          p=p-10;\n          as=false;\n        }\n      }else if(this.numero.includes(\"A\")){\n        if(p+11>21){\n          p=p+1;\n        }else{\n          as=true;\n          p=p+11;\n        }\n      }else{\n          p=p+parseInt(this.numero);\n          if(p>21&& as){\n            p=p-10;\n            as=false;\n          }\n      }\n      return [p,as];\n    }\n    //valida que no se repitan las cartas\n    async validar(){\n      var exist=false;\n      await this.state.casa.forEach((c)=>{\n        if(c.numero===this.numero && c.index===this.index){\n          exist=true;\n        }\n      });\n      await this.state.pichon.forEach((c)=>{\n        if(c.numero===this.numero && c.index===this.index){\n          exist=true;\n        }\n      });\n      console.log(exist);\n      return exist;\n    }\n    //pide una carta\n    async getCard(e,esCasa){\n        this.index=Math.floor(Math.random() * palos.length);\n        this.numero=valores[Math.floor(Math.random() * valores.length)];\n        var exist=false;\n        exist= await this.validar();\n\n        while(exist){\n          this.index=Math.floor(Math.random() * palos.length);\n          this.numero=valores[Math.floor(Math.random() * valores.length)];\n         exist = await this.validar();\n        }\n\n      var c,aux;\n      if(esCasa){\n        c=this.state.casa; \n        aux=await this.contar(this.state.puntosCasa,this.state.asCasa);\n        if(c.length===0 || this.state.fin){\n          c.push({numero:this.numero,index:this.index,visible:true});\n        }else{\n          c.push({numero:this.numero,index:this.index,visible:false});\n        }\n        await this.setState({casa:[...c],puntosCasa:parseInt(aux[0]),asCasa:aux[1]});\n        if(this.state.puntosCasa>=21)\n        this.plantarse(null);\n      }else{\n        c=this.state.pichon; \n        var points=this.state.puntosPichon;\n        aux=await this.contar(points,this.state.asPichon);\n        c.push({numero:this.numero,index:this.index});\n        await this.setState({pichon:[...c],puntosPichon:parseInt((aux[0])),asPichon:aux[1]},()=>{return this.puntosPichon;});\n        if(this.state.puntosPichon>=21)\n        this.plantarse(null);\n      }\n    }\n\n\n    render(){\n        return( \n        <Container bg='#' style={{padding:'1.5rem 0'}}>\n        <img className='left' height='240' src={cooterImg} style={{position:'absolute',margin:'2rem 0'}} />\n        <Row style={{padding:'2rem 0', minHeight:'18rem'}} className=\"justify-content-md-center\">   \n        {this.state.casa.map((card,i)=>{\n          return (card.visible)\n          ?<Col xs lg=\"2\" key={i}><Carta numero={card.numero} palo={palos[card.index]} color={card.index<=1?'text-black':'text-danger'} /></Col> \n          :<Col xs lg=\"2\" key={i}><Card border='dark' style={{ width: '10rem',height:'15rem',padding:'0.125rem' }} className=\"justify-content-md-center\">\n              <Card.Img src={pichonImg} />\n          </Card></Col>\n\n        })}\n        </Row>\n        <Row style={{minHeight:'2rem'}} className=\"text-warning justify-content-md-center\">\n          {\n            (this.state.fin)\n            ?(this.state.puntosPichon>21 || (this.state.puntosCasa<=21 && this.state.puntosCasa>this.state.puntosPichon))\n            ?<Col xs lg=\"4\" className=\"text-center\"><h3>Te bailé sabroso</h3></Col>\n            :(this.state.puntosPichon===this.state.puntosCasa)\n            ?<Col xs lg=\"4\" className=\"text-center\"><h3>Desempate ?</h3></Col>\n            :<Col xs lg=\"4\" className=\"text-center\"><h3>Caimos ante el mejor </h3></Col>\n            :<Col></Col>\n          }\n        </Row>\n        <Row style={{padding:'2rem 0', minHeight:'18rem'}}  className=\"justify-content-md-center\">   \n        {this.state.pichon.map((card,i)=>{\n          return <Col xs lg=\"2\" key={i}>\n                  <Carta numero={card.numero} palo={palos[card.index]} color={card.index<=1?'text-black':'text-danger'} />\n                </Col> \n        })}\n        </Row>\n        <Row className=\"justify-content-md-center\">\n        <Button variant={(this.state.fin)?'outline-warning':'warning'} onClick={(e)=>(this.state.fin)?null:this.getCard(e,false)}>Dame Carta</Button>&nbsp;\n        <Button variant={(this.state.fin)?'outline-warning':'warning'} onClick={(e)=>(this.state.fin)?null:this.plantarse(e)} >Plantarse</Button>&nbsp;\n        <Button variant={(!this.state.fin)?'outline-warning':'warning'} onClick={(e)=>(!this.state.fin)?null:this.refresh(e)} >Repartir</Button>&nbsp;\n        </Row>\n      </Container>)\n    };\n}"]},"metadata":{},"sourceType":"module"}