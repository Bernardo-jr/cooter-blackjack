{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/bernardorios/react/git-repository/cooter-blackjack/src/componentes/partida.js\";\nimport { Component } from 'react';\nimport pichonImg from '../pichon.png';\nimport cooterImg from '../COOTER.png';\nimport Carta from './carta';\nimport mp from '../mp.webp';\nimport { Container, Row, Col, Button, Card } from 'react-bootstrap';\nconst initialState = {\n  pichon: [],\n  puntosPichon: 0,\n  asPichon: false,\n  fin: false,\n  casa: [],\n  puntosCasa: 0,\n  asCasa: false,\n  win: 0\n};\nconst valores = [\"A\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"J\", \"Q\", \"K\"];\nconst palos = [\"♣\", \"♠\", \"♥\", \"♦\"];\nexport default class Partida extends Component {\n  constructor(props) {\n    super(props);\n    this.numero = 0;\n    this.index = 0;\n    this.state = initialState;\n    this.getCard = this.getCard.bind(this);\n    this.plantarse = this.plantarse.bind(this);\n    this.refresh = this.refresh.bind(this);\n  } //evento inicial\n\n\n  async componentDidMount() {\n    await this.getCard(null, false);\n    await this.getCard(null, true);\n    await this.getCard(null, false);\n    await this.getCard(null, true);\n  } //El pichon se planta\n\n\n  async plantarse(e) {\n    var aux = this.state.casa;\n    aux.forEach(c => {\n      c.visible = true;\n    });\n    await this.setState({\n      fin: true,\n      casa: [...aux]\n    });\n\n    if (this.state.puntosPichon < 21 || this.state.puntosPichon === 21 && this.state.pichon.length > 2) {\n      while (this.state.puntosCasa < 17) {\n        aux = this.state.casa;\n        await this.getCard(null, this.state.casa, this.state.puntosCasa);\n      }\n    }\n\n    var auxWin = this.state.win;\n\n    if (this.state.puntosCasa <= 21 && (this.state.puntosCasa > this.state.puntosPichon || this.state.puntosPichon > 21)) {\n      if (this.state.puntosCasa === 21 && this.state.casa.length === 2) {\n        await this.setState({\n          win: auxWin - 2\n        });\n      } else {\n        await this.setState({\n          win: auxWin - 1\n        });\n      }\n    } else if (this.state.puntosPichon <= 21 && (this.state.puntosCasa < this.state.puntosPichon || this.state.puntosCasa > 21)) {\n      if (this.state.puntosPichon === 21 && this.state.pichon.length === 2) {\n        await this.setState({\n          win: auxWin + 2\n        });\n      } else {\n        await this.setState({\n          win: auxWin + 1\n        });\n      }\n    }\n\n    console.log(this.state.win);\n  } //reinicia la mano \n\n\n  async refresh() {\n    var aux = this.state.win;\n    await this.setState({ ...initialState,\n      casa: [],\n      pichon: [],\n      win: aux\n    });\n    this.componentDidMount();\n  } //cuenta los puntos   \n\n\n  async contar(pts, as) {\n    let p = pts;\n\n    if (\"JQK\".includes(this.numero)) {\n      p = p + 10;\n\n      if (p > 21 && as) {\n        p = p - 10;\n        as = false;\n      }\n    } else if (this.numero.includes(\"A\")) {\n      if (p + 11 > 21) {\n        p = p + 1;\n      } else {\n        as = true;\n        p = p + 11;\n      }\n    } else {\n      p = p + parseInt(this.numero);\n\n      if (p > 21 && as) {\n        p = p - 10;\n        as = false;\n      }\n    }\n\n    return [p, as];\n  } //valida que no se repitan las cartas\n\n\n  async validar() {\n    var exist = false;\n    await this.state.casa.forEach(c => {\n      if (c.numero === this.numero && c.index === this.index) {\n        exist = true;\n      }\n    });\n    await this.state.pichon.forEach(c => {\n      if (c.numero === this.numero && c.index === this.index) {\n        exist = true;\n      }\n    });\n    return exist;\n  } //pide una carta\n\n\n  async getCard(e, esCasa) {\n    this.index = Math.floor(Math.random() * palos.length);\n    this.numero = valores[Math.floor(Math.random() * valores.length)];\n    var exist = false;\n    exist = await this.validar();\n\n    while (exist) {\n      this.index = Math.floor(Math.random() * palos.length);\n      this.numero = valores[Math.floor(Math.random() * valores.length)];\n      exist = await this.validar();\n    }\n\n    var c, aux;\n\n    if (esCasa) {\n      c = this.state.casa;\n      aux = await this.contar(this.state.puntosCasa, this.state.asCasa);\n\n      if (c.length === 0 || this.state.fin) {\n        c.push({\n          numero: this.numero,\n          index: this.index,\n          visible: true\n        });\n      } else {\n        c.push({\n          numero: this.numero,\n          index: this.index,\n          visible: false\n        });\n      }\n\n      await this.setState({\n        casa: [...c],\n        puntosCasa: parseInt(aux[0]),\n        asCasa: aux[1]\n      });\n    } else {\n      c = this.state.pichon;\n      var points = this.state.puntosPichon;\n      aux = await this.contar(points, this.state.asPichon);\n      c.push({\n        numero: this.numero,\n        index: this.index\n      });\n      await this.setState({\n        pichon: [...c],\n        puntosPichon: parseInt(aux[0]),\n        asPichon: aux[1]\n      }, () => {\n        return this.puntosPichon;\n      });\n    }\n\n    if (!this.state.fin && (this.state.puntosCasa >= 21 || this.state.puntosPichon >= 21)) {\n      this.plantarse(null);\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(Container, {\n      bg: \"#\",\n      style: {\n        padding: '1.5rem 0'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        className: \"left\",\n        height: \"240\",\n        src: cooterImg,\n        style: {\n          position: 'absolute',\n          margin: '2rem 0'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: 'absolute',\n          padding: '.5rem 1rem',\n          right: '2rem',\n          bottom: '2rem'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"text-center\",\n          style: {\n            padding: '.15rem 1rem',\n            width: '100%',\n            backgroundColor: 'white'\n          },\n          children: this.state.win + \" pts\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        style: {\n          padding: '2rem 0',\n          minHeight: '18rem'\n        },\n        className: \"justify-content-md-center\",\n        children: this.state.casa.map((card, i) => {\n          return card.visible ? /*#__PURE__*/_jsxDEV(Col, {\n            xs: true,\n            lg: \"2\",\n            children: /*#__PURE__*/_jsxDEV(Carta, {\n              numero: card.numero,\n              palo: palos[card.index],\n              color: card.index <= 1 ? 'text-black' : 'text-danger'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 166,\n              columnNumber: 35\n            }, this)\n          }, i, false, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 12\n          }, this) : /*#__PURE__*/_jsxDEV(Col, {\n            xs: true,\n            lg: \"2\",\n            children: /*#__PURE__*/_jsxDEV(Card, {\n              border: \"dark\",\n              style: {\n                width: '10rem',\n                height: '15rem',\n                padding: '0.125rem'\n              },\n              className: \"justify-content-md-center\",\n              children: /*#__PURE__*/_jsxDEV(Card.Img, {\n                src: pichonImg\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 168,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 167,\n              columnNumber: 35\n            }, this)\n          }, i, false, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 12\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        style: {\n          minHeight: '2rem'\n        },\n        className: \"text-warning justify-content-md-center\",\n        children: this.state.fin ? this.state.puntosPichon > 21 || this.state.puntosCasa <= 21 && this.state.puntosCasa > this.state.puntosPichon ? /*#__PURE__*/_jsxDEV(Col, {\n          xs: true,\n          lg: \"4\",\n          className: \"text-center\",\n          children: /*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Te bail\\xE9 sabroso\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 53\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 14\n        }, this) : this.state.puntosPichon === this.state.puntosCasa ? /*#__PURE__*/_jsxDEV(Col, {\n          xs: true,\n          lg: \"4\",\n          className: \"text-center\",\n          children: /*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Desempate ?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 53\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 14\n        }, this) : /*#__PURE__*/_jsxDEV(Col, {\n          xs: true,\n          lg: \"4\",\n          className: \"text-center\",\n          children: /*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Caimos ante el mejor \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 53\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 14\n        }, this) : /*#__PURE__*/_jsxDEV(Col, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 14\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        style: {\n          padding: '2rem 0',\n          minHeight: '18rem'\n        },\n        className: \"justify-content-md-center\",\n        children: this.state.pichon.map((card, i) => {\n          return /*#__PURE__*/_jsxDEV(Col, {\n            xs: true,\n            lg: \"2\",\n            children: /*#__PURE__*/_jsxDEV(Carta, {\n              numero: card.numero,\n              palo: palos[card.index],\n              color: card.index <= 1 ? 'text-black' : 'text-danger'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 187,\n              columnNumber: 19\n            }, this)\n          }, i, false, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 18\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        className: \"justify-content-md-center\",\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          variant: this.state.fin ? 'outline-warning' : 'warning',\n          onClick: e => this.state.fin ? null : this.getCard(e, false),\n          children: \"Dame Carta\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 9\n        }, this), \"\\xA0\", /*#__PURE__*/_jsxDEV(Button, {\n          variant: this.state.fin ? 'outline-warning' : 'warning',\n          onClick: e => this.state.fin ? null : this.plantarse(e),\n          children: \"Plantarse\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 9\n        }, this), \"\\xA0\", /*#__PURE__*/_jsxDEV(Button, {\n          variant: !this.state.fin ? 'outline-warning' : 'warning',\n          onClick: e => !this.state.fin ? null : this.refresh(e),\n          children: \"Repartir\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 9\n        }, this), \"\\xA0\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 9\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/home/bernardorios/react/git-repository/cooter-blackjack/src/componentes/partida.js"],"names":["Component","pichonImg","cooterImg","Carta","mp","Container","Row","Col","Button","Card","initialState","pichon","puntosPichon","asPichon","fin","casa","puntosCasa","asCasa","win","valores","palos","Partida","constructor","props","numero","index","state","getCard","bind","plantarse","refresh","componentDidMount","e","aux","forEach","c","visible","setState","length","auxWin","console","log","contar","pts","as","p","includes","parseInt","validar","exist","esCasa","Math","floor","random","push","points","render","padding","position","margin","right","bottom","width","backgroundColor","minHeight","map","card","i","height"],"mappings":"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","sourcesContent":["import {Component} from 'react';\nimport pichonImg from '../pichon.png';\nimport cooterImg from '../COOTER.png';\nimport Carta from './carta';\nimport mp from '../mp.webp';\n\nimport {Container,Row,Col,Button,Card} from 'react-bootstrap';\nconst initialState = {\n    pichon:[],\n    puntosPichon:0,\n    asPichon:false,\n    fin:false,\n    casa:[],\n    puntosCasa:0,\n    asCasa:false,\n    win:0,\n};\nconst valores=[\"A\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"J\",\"Q\",\"K\"];\nconst  palos=[\"♣\" , \"♠\", \"♥\" , \"♦\" ];\nexport default class Partida extends Component{\n\n    \n    numero=0;\n    index=0;\n    constructor(props){\n        super(props);\n        this.state=initialState;\n        this.getCard=this.getCard.bind(this);\n        this.plantarse=this.plantarse.bind(this);\n        this.refresh=this.refresh.bind(this);\n    }\n    //evento inicial\n    async componentDidMount(){\n        await this.getCard(null,false);\n        await this.getCard(null,true);\n        await this.getCard(null,false);\n        await this.getCard(null,true);\n    }\n    //El pichon se planta\n    async plantarse(e){\n      var aux=this.state.casa;\n      aux.forEach((c)=>{\n        c.visible=true;\n      });\n      await this.setState({\n        fin:true,\n        casa:[...aux]\n      });\n    if(this.state.puntosPichon<21 || (this.state.puntosPichon===21 && this.state.pichon.length>2)){\n      while(this.state.puntosCasa<17){\n        aux=this.state.casa;\n        await this.getCard(null,this.state.casa,this.state.puntosCasa);\n      }\n    }\n    var auxWin=this.state.win;\n    if(this.state.puntosCasa<=21 && (this.state.puntosCasa>this.state.puntosPichon || this.state.puntosPichon>21)){\n      if(this.state.puntosCasa===21 && this.state.casa.length===2){\n        await this.setState({win:auxWin-2});\n      }else{\n        await this.setState({win:auxWin-1});\n      }\n    }else if(this.state.puntosPichon<=21 &&  (this.state.puntosCasa<this.state.puntosPichon || this.state.puntosCasa>21)){\n      if(this.state.puntosPichon===21 && this.state.pichon.length===2){\n        await this.setState({win:auxWin+2});\n      }else{\n        await this.setState({win:auxWin+1});\n      }\n    }\n    console.log(this.state.win);\n    }\n   //reinicia la mano \n   async refresh(){\n     var aux=this.state.win;\n       await this.setState({...initialState,casa:[],pichon:[],win:aux});\n        this.componentDidMount();\n    }\n    \n  //cuenta los puntos   \n  async contar(pts,as){\n      let p=pts;\n      if(\"JQK\".includes(this.numero)){\n        p=p+10;\n        if(p>21&& as){\n          p=p-10;\n          as=false;\n        }\n      }else if(this.numero.includes(\"A\")){\n        if(p+11>21){\n          p=p+1;\n        }else{\n          as=true;\n          p=p+11;\n        }\n      }else{\n          p=p+parseInt(this.numero);\n          if(p>21&& as){\n            p=p-10;\n            as=false;\n          }\n      }\n      return [p,as];\n    }\n    //valida que no se repitan las cartas\n    async validar(){\n      var exist=false;\n      await this.state.casa.forEach((c)=>{\n        if(c.numero===this.numero && c.index===this.index){\n          exist=true;\n        }\n      });\n      await this.state.pichon.forEach((c)=>{\n        if(c.numero===this.numero && c.index===this.index){\n          exist=true;\n        }\n      });\n      return exist;\n    }\n    //pide una carta\n    async getCard(e,esCasa){\n        this.index=Math.floor(Math.random() * palos.length);\n        this.numero=valores[Math.floor(Math.random() * valores.length)];\n        var exist=false;\n        exist= await this.validar();\n\n        while(exist){\n          this.index=Math.floor(Math.random() * palos.length);\n          this.numero=valores[Math.floor(Math.random() * valores.length)];\n         exist = await this.validar();\n        }\n\n      var c,aux;\n      if(esCasa){\n        c=this.state.casa; \n        aux=await this.contar(this.state.puntosCasa,this.state.asCasa);\n        if(c.length===0 || this.state.fin){\n          c.push({numero:this.numero,index:this.index,visible:true});\n        }else{\n          c.push({numero:this.numero,index:this.index,visible:false});\n        }\n        await this.setState({casa:[...c],puntosCasa:parseInt(aux[0]),asCasa:aux[1]});\n\n      }else{\n        c=this.state.pichon; \n        var points=this.state.puntosPichon;\n        aux=await this.contar(points,this.state.asPichon);\n        c.push({numero:this.numero,index:this.index});\n        await this.setState({pichon:[...c],puntosPichon:parseInt((aux[0])),asPichon:aux[1]},()=>{return this.puntosPichon;});\n      }\n      if(!this.state.fin && (this.state.puntosCasa>=21 || this.state.puntosPichon>=21)){\n        this.plantarse(null);\n      }\n    }\n\n\n    render(){\n        return( \n        <Container bg='#' style={{padding:'1.5rem 0'}}>\n        <img className='left' height='240' src={cooterImg} style={{position:'absolute',margin:'2rem 0'}} />\n        <div style={{position:'absolute',padding:'.5rem 1rem',right:'2rem',bottom:'2rem'}}>\n\n        <label className='text-center' style={{padding:'.15rem 1rem',width:'100%',backgroundColor:'white'}}>{this.state.win + \" pts\"}</label>\n        </div>\n        <Row style={{padding:'2rem 0', minHeight:'18rem'}} className=\"justify-content-md-center\">   \n        {this.state.casa.map((card,i)=>{\n          return (card.visible)\n          ?<Col xs lg=\"2\" key={i}><Carta numero={card.numero} palo={palos[card.index]} color={card.index<=1?'text-black':'text-danger'} /></Col> \n          :<Col xs lg=\"2\" key={i}><Card border='dark' style={{ width: '10rem',height:'15rem',padding:'0.125rem' }} className=\"justify-content-md-center\">\n              <Card.Img src={pichonImg} />\n          </Card></Col>\n\n        })}\n        </Row>\n        <Row style={{minHeight:'2rem'}} className=\"text-warning justify-content-md-center\">\n          {\n            (this.state.fin)\n            ?(this.state.puntosPichon>21 || (this.state.puntosCasa<=21 && this.state.puntosCasa>this.state.puntosPichon))\n            ?<Col xs lg=\"4\" className=\"text-center\"><h3>Te bailé sabroso</h3></Col>\n            :(this.state.puntosPichon===this.state.puntosCasa)\n            ?<Col xs lg=\"4\" className=\"text-center\"><h3>Desempate ?</h3></Col>\n            :<Col xs lg=\"4\" className=\"text-center\"><h3>Caimos ante el mejor </h3></Col>\n            :<Col></Col>\n          }\n        </Row>\n        <Row style={{padding:'2rem 0', minHeight:'18rem'}}  className=\"justify-content-md-center\">   \n        {this.state.pichon.map((card,i)=>{\n          return <Col xs lg=\"2\" key={i}>\n                  <Carta numero={card.numero} palo={palos[card.index]} color={card.index<=1?'text-black':'text-danger'} />\n                </Col> \n        })}\n        </Row>\n        <Row className=\"justify-content-md-center\">\n        <Button variant={(this.state.fin)?'outline-warning':'warning'} onClick={(e)=>(this.state.fin)?null:this.getCard(e,false)}>Dame Carta</Button>&nbsp;\n        <Button variant={(this.state.fin)?'outline-warning':'warning'} onClick={(e)=>(this.state.fin)?null:this.plantarse(e)} >Plantarse</Button>&nbsp;\n        <Button variant={(!this.state.fin)?'outline-warning':'warning'} onClick={(e)=>(!this.state.fin)?null:this.refresh(e)} >Repartir</Button>&nbsp;\n        </Row>\n      </Container>)\n    };\n}"]},"metadata":{},"sourceType":"module"}